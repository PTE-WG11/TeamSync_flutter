# TeamSync 前端开发指南

## 📋 文档信息
- **项目名称**: TeamSync 团队协作管理系统
- **版本**: v1.0
- **平台**: Flutter Web (桌面端优先)
- **日期**: 2026-02-10

---

## 1. 技术栈

| 类别 | 技术 | 版本 | 说明 |
|------|------|------|------|
| **框架** | Flutter | 3.16+ | UI框架 |
| **语言** | Dart | 3.0+ | 编程语言 |
| **状态管理** | flutter_bloc | ^8.1.0 | BLoC模式 |
| **依赖注入** | get_it | ^7.6.0 | 服务定位器 |
| **网络请求** | dio | ^5.4.0 | HTTP客户端 |
| **路由** | go_router | ^13.0.0 | 声明式路由 |
| **本地存储** | shared_preferences | ^2.2.0 | 键值存储 |
| **WebSocket** | web_socket_channel | ^2.4.0 | 实时通信 |
| **日期处理** | intl | ^0.18.0 | 国际化/日期 |

---

## 2. 项目结构

```
lib/
├── main.dart                      # 应用入口
├── app.dart                       # 应用配置
├── config/                        # 配置文件
│   ├── constants.dart             # 常量定义
│   ├── theme.dart                 # 主题配置
│   └── routes.dart                # 路由配置
├── core/                          # 核心模块
│   ├── errors/                    # 错误处理
│   ├── usecases/                  # 用例抽象
│   ├── utils/                     # 工具函数
│   └── network/                   # 网络层
│       ├── api_client.dart        # Dio配置
│       ├── api_endpoints.dart     # API端点
│       └── interceptors/          # 拦截器
├── features/                      # 功能模块
│   ├── auth/                      # 认证模块
│   │   ├── data/
│   │   │   ├── models/            # 数据模型
│   │   │   ├── repositories/      # 数据仓库
│   │   │   └── datasources/       # 数据源
│   │   ├── domain/
│   │   │   ├── entities/          # 实体
│   │   │   ├── repositories/      # 仓库接口
│   │   │   └── usecases/          # 用例
│   │   └── presentation/
│   │       ├── bloc/              # BLoC
│   │       ├── pages/             # 页面
│   │       └── widgets/           # 组件
│   ├── project/                   # 项目管理
│   ├── task/                      # 任务管理
│   ├── dashboard/                 # 仪表盘
│   ├── member/                    # 成员管理
│   ├── notification/              # 通知中心
│   └── file/                      # 文件管理
├── shared/                        # 共享资源
│   ├── widgets/                   # 通用组件
│   ├── models/                    # 共享模型
│   └── extensions/                # 扩展方法
└── injection.dart                 # 依赖注入配置
```

---

## 3. 开发规范

### 3.1 命名规范

| 类型 | 规范 | 示例 |
|------|------|------|
| **文件** | snake_case | `auth_repository.dart` |
| **类** | PascalCase | `AuthRepository` |
| **变量** | camelCase | `userName` |
| **常量** | SCREAMING_SNAKE_CASE | `API_BASE_URL` |
| **私有** | _前缀 | `_privateVar` |

### 3.2 目录规范

- 每个功能模块独立目录
- 数据层、领域层、表现层分离
- 组件按功能分组

```




## 6. 开发阶段检查清单

### Phase 1: 核心基础

- [ ] 项目框架搭建
- [ ] 认证模块 (登录/登出/Token刷新)
- [ ] 项目列表/详情
- [ ] 任务列表/详情
- [ ] 基础仪表盘

### Phase 2: 协作增强

- [ ] 甘特图组件
- [ ] 看板视图
- [ ] 日历视图
- [ ] 通知中心
- [ ] WebSocket集成
- [ ] 成员管理

### Phase 3: 功能完善

- [ ] 文件上传/下载
- [ ] 任务历史
- [ ] 系统设置
- [ ] 性能优化
- [ ] 单元测试
**2. 严谨的项目结构**
代码组织遵循清晰的分层原则，主要分为：
- **config/**：存放常量、主题和路由配置。
- **core/**：封装错误处理、网络层拦截器及工具函数等通用基础设施。
- **features/**：按功能模块（如认证、任务、项目）划分，每个模块内部严格执行“数据-领域-表现”三层架构。
- **shared/**：存放跨模块复用的组件、模型和扩展方法。

**3. 开发与代码规范**
- **命名约定**：文件使用 `snake_case`，类名使用 `PascalCase`，变量使用 `camelCase`，常量则使用大写蛇形命名。

**4. 核心逻辑实现**
- **认证机制**：通过 Dio 拦截器自动处理 Token 注入与过期自动刷新，确保用户会话的无缝衔接。
- **路由控制**：在 GoRouter 中集成了重定向逻辑，根据用户的登录状态和角色权限（如访客限制）自动跳转页面。
- **权限管理**：通过 `PermissionUtils` 集中定义业务权限逻辑（如谁可以创建项目或编辑任务），并在 UI 层通过状态监听动态控制组件的显示与交互。
- **实时通信**：封装了 `WebSocketClient`，支持自动重连机制，用于实时推送系统通知。

**5. UI 与组件规范**
- **色彩体系**：定义了以 Teal (青色) 为主色调的 `AppColors`，并为背景、文字、分隔线及各种任务状态（规划中、进行中等）设定了标准色值。
- **标准组件**：内置了高度封装的 `TaskStatusBadge` (状态徽章) 和 `TaskPriorityBadge` (优先级徽章)，通过统一的视觉语言展示任务的紧迫性和进度。

**6. 阶段性开发计划**
指南将开发划分为三个明确阶段：
- **第一阶段**：夯实基础（认证、项目/任务基础功能、仪表盘）。
- **第二阶段**：增强协作（甘特图、看板、日历、WebSocket 通知）。
- **第三阶段**：完善体验（文件管理、历史记录、性能优化及测试）。

---

*文档版本: v1.0 | 最后更新: 2026-02-10*
